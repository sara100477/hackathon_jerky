{% extends 'base.html' %}



{% block contents %}

<!-- -----------------------------------------nav bar------------------------------------------------------------------------->
<p style="margin: 50px;"> &nbsp</p>
  

<p>
  <div style="border:1px ;float:left;width:25%;padding: 10px; border-bottom: 5px solid black;">
    <a class="nav-link" href="{%url 'home' %}" style="font-size: 25px;"> Home <span class="sr-only" >(current)</span></a>
  </div>
  <div style="border:1px ;float:left;width:25%;padding: 10px; border-bottom: 5px solid black;">
    <a class="nav-link" href="{%url 'about' %}" style="font-size: 25px;">About</a>
  </div>
<div style="border:1px ;float:left;width:25%;padding: 10px; border-bottom: 5px solid black;">
<a class="nav-link" onclick="this.nextSibling.style.display=(this.nextSibling.style.display=='none')?'block':'none';"
  href="javascript:void(0)" style="font-size: 25px;" >
  Search
</a><div style="DISPLAY: none">
  <div class="card" style="border:1px ;width:100%;background-color: rgba( 255, 255, 255, 1 );" >
      <p><form action="{%url 'home' %}" method="POST">{% csrf_token %}
        <div style="border-right: 3px solid gray ;float:left;margin-left: 1px;margin-right: 10px;width: 50%;">
          Brand<br> 
          <input type="hidden" name="brand" value="all">
          <input type="checkbox" name="brand" value="스타벅스">스타벅스<br> 
          <input type="checkbox" name="brand" value="투썸플레이스">투썸플레이스<br> 
          <input type="checkbox" name="brand" value="all">전체 브랜드<br> 
        </div>
      
        <div style="float:left;margin-left: 10px;width: 45%;">
          Sale type<br>
          <input type="hidden" name="saletype" value="all">
          <input type="checkbox" name="saletype" value="경매">경매<br> 
          <input type="checkbox" name="saletype" value="급매">급매<br>
          <input type="checkbox" name="saletype" value="all">전체<br>
        </div>
        <div >
        <input class="button" type="submit" style=" margin-top: 10px; border-radius: 12px;" value="Search!">
      </div>
      </form></p>
    </div>
  <a onclick="this.parentNode.style.display='none';" href="javascript:void(0)">
  </a></div></div>

  <div style="border:1px ;float:left;width:25%;padding: 10px; border-bottom: 5px solid black;">
  <a class="nav-link" href="{%url 'upload_file' %}" style="font-size: 25px;"><span class="glyphicon glyphicon-gift" aria-hidden="true"></span>
    Register</a></div>
  </p>

 <p style="margin: 150px;">&nbsp</p>





<!--Detail-->
{% if details %}
{%ifequal details.saletype "경매"%}
<!--경매-->
<div  class="card mb-5" style="max-width: 800px; display: block; margin: 0px auto; ">
  <div class="row no-gutters">
    <div class="col-md-4">
      <img src="{{details.productimg.url}}" height="300" alt="" class="card-img" alt="...">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h3 class="card-title">{{details.pbrand}}</h3>
        <h4 class="card-title">{{details.pitem}}</h4>
        <p class="card-text">
          상품분류: {{details.saletype}}<br>
          하한가:&nbsp{{details.lowerlimit}}<br>
          입찰가: {{details.bidprice}}<br>
          입찰자:{{details.biduser}}<br>
          원가:&nbsp{{details.originalprice}}<br>
          작성자:&nbsp{{details.user_id}}
          <form method="POST" action="{%url 'auction' details.id %}">
            <input type="number" name="bidprice">
            <input type="submit">
          </form>
        </p>

        <a class="btn btn-primary" href="{%url 'buy' details.id%}" role="button">구매</a>
        <a class="btn btn-primary" href="{%url 'upload_file' %}" role="button">상품등록</a>
        <a class="btn btn-primary" href="{%url 'home' %}" role="button">돌아가기</a>
      </div>
    </div>
  </div>
</div>


{%else%}
<!--급매-->
<div  class="card mb-5" style="max-width: 800px; display: block; margin: 0px auto; ">
  <div class="row no-gutters">
    <div class="col-md-4">
      <img src="{{details.productimg.url}}" height="300" alt="" class="card-img" alt="...">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h3 class="card-title">{{details.pbrand}}</h3>
        <h4 class="card-title">{{details.pitem}}</h4>
        <p class="card-text">
          상품분류: {{details.saletype}}<br>
          판매가:&nbsp{{details.lowerlimit}}<br>
          원가:&nbsp{{details.originalprice}}<br>
          작성자:&nbsp{{details.user_id}}</p>

        <a class="btn btn-primary" href="{%url 'buy' details.id%}" role="button">구매</a>
        <a class="btn btn-primary" href="{%url 'upload_file' %}" role="button">상품등록</a>
        <a class="btn btn-primary" href="{%url 'home' %}" role="button">돌아가기</a>
      </div>
    </div>
  </div>
</div>
{%endifequal%}
{%endif%}



<p style="text-align: right; grid-gap: 1rem; margin-right: 10rem;">
<a style="text-decoration: none; color: rgb(53, 52, 52); font-size-adjust: 8px;" href="{%url 'home' 2 1 %}" >
  <span class="glyphicon glyphicon-star" aria-hidden="true"></span>최신순&nbsp&nbsp
</a>
<a style="text-decoration: none; color: rgb(53, 52, 52); font-size-adjust: 8px;" href="{%url 'home' 2 2 %}" >낮은가격순&nbsp&nbsp </a>
<a style="text-decoration: none; color: rgb(53, 52, 52); font-size-adjust: 8px;" href="{%url 'home' 2 3 %}" >높은가격순 </a>
</p>


<div class="card-group">
  {% for u in posts %}
  <a href="{%url 'home' 1 u.id %}" style="text-decoration: none;" class="button">
  <div class="card" style="border-color: rgba(255,255,255,1);">
    <img src="{{u.productimg.url}}" height="300" alt="">
    <div class="card-body">
      <h5 class="card-title">{{u.pbrand}}</h5>
      <h5 class="card-title">{{u.pitem}}</h5>
      <p class="card-text">{{u.lowerlimit}}</p>
 

    </div>
  </div></a>
  {%endfor%}
</div><br>


<nav>
    <ul class="pager">
      {% if posts.has_previous %}
      <li><a href="?page={{posts.previous_page_number}}">Prev</a></li>
      {%else%}
      <li class="previous disabled"><a href="#">Prev</a></li>
      {% endif %}    
    
      <span>&nbsp&nbsp{{posts.number}}</span>
      <span> of</span>
      <span> {{posts.paginator.num_pages}}&nbsp&nbsp</span>
  
      {%if posts.has_next%}
      <li><a href="?page={{posts.next_page_number}}">Next</a></li>
      {%else%}
      <li class="next disabled"><a href="#">Next</a></li>
      {% endif %}    
      </ul>
  </nav>

{%endblock%}